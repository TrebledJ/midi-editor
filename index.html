<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="./assets/css/index.css">
    <link rel="stylesheet" href="./assets/third-party/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/third-party/bootstrap/bootstrap4-toggle.min.css">
    <link rel="stylesheet" href="./assets/css/fontawesome-all.min.css">

    <!-- shims -->
    <script src="./assets/third-party/midi-js/inc/shim/Base64.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/inc/shim/Base64binary.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/inc/shim/WebAudioAPI.js" type="text/javascript"></script>

    <!-- midi.js -->
    <script src="./assets/third-party/midi-js/js/midi/audioDetect.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/js/midi/gm.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/js/midi/loader.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/js/midi/plugin.audiotag.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/js/midi/plugin.webaudio.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/js/midi/plugin.webmidi.js" type="text/javascript"></script>

    <!-- utils -->
    <script src="./assets/third-party/midi-js/js/util/dom_request_xhr.js" type="text/javascript"></script>
    <script src="./assets/third-party/midi-js/js/util/dom_request_script.js" type="text/javascript"></script>

    <!-- Piano roll -->
    <script defer src="./assets/js/webaudio-pianoroll.js"></script>

    <!-- Note Control -->
    <!-- <script src="./assets/js/select.js"></script> -->
    <!-- <script src="webcomponents-lite.min.js"></script> -->

    <script src="./assets/third-party/jquery/jquery-3.5.1.min.js"></script>
    <script async src="./assets/third-party/bootstrap/bootstrap.min.js"></script>
    <script async src="./assets/third-party/bootstrap/bootstrap4-toggle.min.js"></script>
    <script async src="https://unpkg.com/@tonejs/midi"></script>

    <script defer src="./assets/js/util.js" type="text/javascript"></script>
    <script defer src="./assets/js/index.js" type="text/javascript"></script>

    <title>MIDI Editor - Group 7 - COMP4431</title>
  </head>

  <body>
    <nav class="navbar navbar-dark bg-dark navbar-fixed-top">
      <div class="navbar-header">
        <span class="navbar-brand">MIDI Editor</span>
      </div>
    </nav>

    <div class="loading">
      Loading
      <div class="loader"></div>
    </div>

    <div class="container">

      <!-- File Management Interface -->
      <div class="row">
        <div class="col-4-auto">
          <div class="input-group">
            <button type="button" class="button" id="record-button">
              <span class="button_text">Record</span>
              <span class="button_icon">
                <i class="fa-solid fa-record-vinyl"></i>
              </span>
            </button>
          </div>
        </div>
        <div class="col-4-auto">
          <div class="input-group">
            <!-- Use a hidden input, which will ultimately trigger the file upload box. -->
            <input type="file" id="upload-file-select" accept=".mid,.wav" hidden/>
            <!-- The button here will trigger the file input above. -->
            <button type="file" class="button" id="upload-button" onclick="$('#upload-file-select').click()">
              <span class="button_text">Upload</span>
              <span class="button_icon">
                <i class="fa-solid fa-upload"></i>
              </span>
            </button>
          </div>
        </div>
        <div class="col-4-auto">
          <div class="input-group">
            <button type="button" class="button" id="save-button">
              <span class="button_text">Save</span>
              <span class="button_icon">
                <i class="fa-solid fa-floppy-disk"></i>
              </span>
            </button>
          </div>
        </div>

        <!-- MIDI PLay Stop Control -->
        <div class="col-4">
          <div class="btn-toolbar">
            <div class="btn-group btn-group-lg ">
              <button id="play-button" class="btn btn-success">
                <i class="fas fa-play me-2"></i>
                <span>Play</span></button>
              <button id="stop-button" class="btn btn-danger">
                <i class="fas fa-stop me-2"></i>
                <span>Stop</span></button>
            </div>
          </div>
        </div>

        <!-- Time Display -->
        <div class="timedisplay-topbox" id = "time-display">
          <h5>10:00:00</h5>
        </div>
        <div class="timedisplay-bottombox"></div>
      </div>

      <!-- Vertical Note Track Control -->
      <!-- <div class="verticalslidercontainer">
        <input type="range" min="1" max="100" value="50" class="verticalslider" id="vertical-slide">
      </div> -->
      <br>
    
      <!-- Track Control Panel -->
      <div class="track">
        <table class="styled-table" width="100%" height="100%">
          <thead>
            <tr>
              <th>Tracks</th>
              <th>Instrument</th>
              <th>Show</th>
              <th>Mute</th>
              <th>Solo</th>
            </tr>
          </thead>
          <tr>
            <td>Track 1</td>
            <td>
              <select class="instrument-select" id="instrument-select-1"></select>
              <br>
              <input class="instrument-volume" id="instrument-volume-1" type="range" value="0.5" min="0" max="1" step="0.05">
            </td>
            <td><input type="checkbox" class="instrument-show" id="instrument-show-1"></td>
            <td><input type="checkbox" class="instrument-mute" id="instrument-mute-1"></td>
            <td><input type="checkbox" class="instrument-solo" id="instrument-solo-1"></td>
          </tr>
          <tr>
            <td>Track 2</td>
            <td>
              <select class="instrument-select" id="instrument-select-2"></select>
              <br>
              <input class="instrument-volume" id="instrument-volume-2" type="range" value="0.5" min="0" max="1" step="0.05">
            </td>
            <td><input type="checkbox" class="instrument-show" id="instrument-show-2"></td>
            <td><input type="checkbox" class="instrument-mute" id="instrument-mute-2"></td>
            <td><input type="checkbox" class="instrument-solo" id="instrument-solo-2"></td>
          </tr>
          <tr>
            <td>Track 3</td>
            <td>
              <select class="instrument-select" id="instrument-select-3"></select>
              <br>
              <input class="instrument-volume" id="instrument-volume-3" type="range" value="0.5" min="0" max="1" step="0.05">
            </td>
            <td><input type="checkbox" class="instrument-show" id="instrument-show-3"></td>
            <td><input type="checkbox" class="instrument-mute" id="instrument-mute-3"></td>
            <td><input type="checkbox" class="instrument-solo" id="instrument-solo-3"></td>
          </tr>
          <tr>
            <td>Track 4</td>
            <td>
              <select class="instrument-select" id="instrument-select-4"></select>
              <br>
              <input class="instrument-volume" id="instrument-volume-4" type="range" value="0.5" min="0" max="1" step="0.05">
            </td>
            <td><input type="checkbox" class="instrument-show" id="instrument-show-4"></td>
            <td><input type="checkbox" class="instrument-mute" id="instrument-mute-4"></td>
            <td><input type="checkbox" class="instrument-solo" id="instrument-solo-4"></td>
          </tr>
          <tr>
            <td>Track 5</td>
            <td>
              <select class="instrument-select" id="instrument-select-5"></select>
              <br>
              <input class="instrument-volume" id="instrument-volume-5" type="range" value="0.5" min="0" max="1" step="0.05">
            </td>
            <td><input type="checkbox" class="instrument-show" id="instrument-show-5"></td>
            <td><input type="checkbox" class="instrument-mute" id="instrument-mute-5"></td>
            <td><input type="checkbox" class="instrument-solo" id="instrument-solo-5"></td>
          </tr>
        </table>
      </div>

      <!-- Pianoroll Plug In -->
      <webaudio-pianoroll ></webaudio-pianoroll>

      <!-- Keyboard -->
      <div class="keyboard">
        <div class="white-keys">
          <!-- <button type="button" class="white-key" id="key-0"></button>
                      <button type="button" class="white-key" id="key-2"></button>
                      <button type="button" class="white-key" id="key-4"></button>
                      <button type="button" class="white-key" id="key-5"></button>
                      <button type="button" class="white-key" id="key-7"></button>
                      <button type="button" class="white-key" id="key-9"></button>
                      <button type="button" class="white-key" id="key-11"></button>
                      <button type="button" class="white-key" id="key-12"></button>
                      <button type="button" class="white-key" id="key-14"></button>
                      <button type="button" class="white-key" id="key-16"></button>
                      <button type="button" class="white-key" id="key-17"></button>
                      <button type="button" class="white-key" id="key-19"></button>
                      <button type="button" class="white-key" id="key-21"></button>
                      <div class="white-key" id="key-23"></div> -->
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
          <div class="white-key"></div>
        </div>

        <div class="black-keys">
					<div class="black-key key-bb"></div>
					<div class="black-key key-ab"></div>
					<div class="black-key key-gb"></div>
					<div class="black-key key-eb"></div>
					<div class="black-key key-db"></div>
					<div class="black-key key-bb"></div>
					<div class="black-key key-ab"></div>
					<div class="black-key key-gb"></div>
					<div class="black-key key-eb"></div>
					<div class="black-key key-db"></div>
          <!-- <button type="button" class="black-key" id="key-1"></button> -->
          <!-- <button type="button" class="black-key" id="key-3"></button> -->
          <!-- <button type="button" class="black-key" id="key-6"></button> -->
          <!-- <button type="button" class="black-key" id="key-8"></button> -->
          <!-- <button type="button" class="black-key" id="key-10"></button> -->
          <!-- <button type="button" class="black-key" id="key-13"></button> -->
          <!-- <button type="button" class="black-key" id="key-15"></button> -->
          <!-- <button type="button" class="black-key" id="key-18"></button> -->
          <!-- <button type="button" class="black-key" id="key-20"></button> -->
          <!-- <button type="button" class="black-key" id="key-22"></button> -->
        </div>
      </div>

      <!-- Horizontal Timeline Control -->
      <div class="row">
        <div class="col-4">
          <div class="slidecontainer">
            <input type="range" min="0" max="100" value="0" step="1" class="slider" id="horizontal-slider">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-4">
          <div class="scaleslidercontainer">
            <input type="range" min="16" max="160" value="32" step="16" class="scaleslider" id="timeline-control" >
          </div>
        </div>
      </div>

      <br>
      <br>
      <br>

      <!-- MIDI Parameter Control Panel -->
      <div class="row">
        <div class="col-6">
          <h5>Note Control</h5>
        </div>
        <div class="col-6">
          <h5>Project Setting</h5>
        </div>
      </div>
      <div class="row">
        <div class="col-2">
          <label for="pitch-control">Pitch</label>
          <div class="input-group">
            <input class="pitch-control" id="pitch-control" type="number" value="60" min="0" max="127" step="1">
            <div class="input-group-append">
              <span class="input-group-text">Hz</span></div>
          </div>
        </div>
        <div class="col-2">
          <label for="duration-control">Duration</label>
          <div class="input-group">
            <input class="duration-control" id="duration-control" type="number" value="10" min="1" max="120" step="1">
            <div class="input-group-append">
              <span class="input-group-text">s</span></div>
          </div>
        </div>
        <div class="col-2">
          <label for="velocity-control">Velocity</label>
          <div class="input-group">
            <input class="velocity-control" id="velocity-control" type="number" value="30" min="0" max="127" step="1">
            <div class="input-group-append">
              <span class="input-group-text">Vol</span></div>
          </div>
        </div>
        <div class="col-2">
          <label for="tempo-control">Tempo</label>
          <div class="input-group">
            <input class="tempo-control" id="tempo-control" type="number" value="120" min="10" max="250" step="5">
            <div class="input-group-append">
              <span class="input-group-text">BPM</span></div>
          </div>
        </div>
        <div class="col-2">
          <label for="timesig-control">Time Signature</label>
          <div class="input-group">
            <input class="timesig-control" id="timesig-control" type="number" value="10" min="1" max="120" step="1">
            <div class="input-group-append">
              <span class="input-group-text">=<i class="fa-solid fa-music fa-2xl"></i></span></div>
          </div>
        </div>
        <!-- <div class="col-2">
          <label for="timeline-control">Timeline Duration</label>
          <div class="input-group">
            <input class="timeline-control" id="timeline-control" type="number" value="32" min="16" max="160" step="16">
            <div class="input-group-append">
              <span class="input-group-text">s</span></div>
          </div>
        </div> -->
      </div>
    </div>
  </body>

</html>